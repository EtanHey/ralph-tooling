{
  "id": "BUG-002",
  "title": "-QN notification flag not working",
  "description": "The -QN/--notify flag doesn't enable ntfy notifications. Need to trace the flag through ralph.zsh -> ralph-ui to find where it's being lost.",
  "acceptanceCriteria": [
    {"text": "Trace -QN flag from ralph.zsh through to ralph-ui runner", "checked": true},
    {"text": "Verify RALPH_NOTIFY env var is set when -QN passed", "checked": true},
    {"text": "Verify ralph-ui reads --notify flag and enables notifications", "checked": true},
    {"text": "Fix the broken link in the notification chain", "checked": true},
    {"text": "Add verbose log when ntfy called: `[NTFY] Sending to {topic}: {title}`", "checked": true},
    {"text": "TEST SETUP: Create temp dir `/tmp/ralph-ntfy-test` with mock prd-json/", "checked": true},
    {"text": "TEST SETUP: Create index.json with 1 story: TEST-001 'Echo hello world'", "checked": true},
    {"text": "TEST SETUP: Story criteria: 'Run: echo hello' (auto-pass)", "checked": true},
    {"text": "TEST RUN: cd to temp dir, run `ralph 1 -QN -v 2>&1 | tee /tmp/ralph-ntfy.log`", "checked": false},
    {"text": "TEST VERIFY: grep '[NTFY]' /tmp/ralph-ntfy.log returns match", "checked": false},
    {"text": "TEST VERIFY: Log shows topic and title (not empty)", "checked": false},
    {"text": "TEST CLEANUP: rm -rf /tmp/ralph-ntfy-test /tmp/ralph-ntfy.log", "checked": false},
    {"text": "Typecheck passes", "checked": false},
    {"text": "Run CodeRabbit review - must pass (or create BUG if unfixable)", "checked": false},
    {"text": "Commit: fix: BUG-002 restore -QN notification flag functionality", "checked": false}
  ],
  "storyType": "bug"
}
