{
  "id": "V-016",
  "title": "Verify: ralph-start worktree sync completeness (TDD)",
  "description": "Opus audit + TDD: Identify what needs syncing, create tests FIRST, then update US-086 criteria.",
  "model": "opus",
  "acceptanceCriteria": [
    {
      "text": "=== UNDERSTAND LAYERED SYSTEM ===",
      "checked": true
    },
    {
      "text": "Review ~/.claude/CLAUDE.md (global layer)",
      "checked": true
    },
    {
      "text": "Review project CLAUDE.md with @context directives",
      "checked": true
    },
    {
      "text": "Review ~/.claude/contexts/ structure (base.md, workflow/, tech/)",
      "checked": true
    },
    {
      "text": "Understand MP-002 modular context loading via --append-system-prompt-file",
      "checked": true
    },
    {
      "text": "=== COMMIT HISTORY AUDIT ===",
      "checked": true
    },
    {
      "text": "Run: git log --oneline | head -100 to see recent features",
      "checked": true
    },
    {
      "text": "Identify sync-related commits (contexts, configs, skills, MCPs)",
      "checked": true
    },
    {
      "text": "Cross-check: does worktree sync handle each new file type?",
      "checked": true
    },
    {
      "text": "Document gaps in docs.local/worktree-gaps-from-history.md",
      "checked": true
    },
    {
      "text": "=== EXPLORATION ===",
      "checked": true
    },
    {
      "text": "Identify which context files worktrees need copied vs symlinked",
      "checked": true
    },
    {
      "text": "Check .env*, tsconfig, package.json sync needs",
      "checked": true
    },
    {
      "text": "Check prd-json/ directory sync needs",
      "checked": true
    },
    {
      "text": "Review 1Password .env.template files",
      "checked": true
    },
    {
      "text": "=== TDD: CREATE TESTS FIRST ===",
      "checked": true
    },
    {
      "text": "Add test: test_worktree_syncs_env_files()",
      "checked": true
    },
    {
      "text": "Add test: test_worktree_syncs_claude_md() for project CLAUDE.md",
      "checked": true
    },
    {
      "text": "Add test: test_worktree_syncs_contexts() for context files",
      "checked": true
    },
    {
      "text": "Add test: test_worktree_syncs_prd_json()",
      "checked": true
    },
    {
      "text": "Add test: test_worktree_sync_config() for .worktree-sync.json",
      "checked": true
    },
    {
      "text": "Tests should FAIL initially (TDD red phase)",
      "checked": true
    },
    {
      "text": "=== UPDATE US-086 ===",
      "checked": true
    },
    {
      "text": "Document layered system in docs.local/worktree-sync-audit.md",
      "checked": true
    },
    {
      "text": "Update US-086 criteria to handle all layers",
      "checked": true
    },
    {
      "text": "Run CodeRabbit review - must pass (or create BUG if unfixable)",
      "checked": true
    },
    {
      "text": "Commit: test: V-016 worktree sync TDD tests",
      "checked": true
    }
  ],
  "storyType": "V",
  "priority": "high",
  "dependencies": [],
  "createdAt": "2026-01-24T05:30:00.000Z",
  "passes": true
}
