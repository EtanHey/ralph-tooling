{
  "id": "US-041",
  "title": "Enhanced archive skill with cleanup option",
  "description": "Upgrade the archive skill from simple knowledge to a proper skill with bash functions. Archives to docs.local/prd-archive/ (preserves full history). After archiving, ask if user wants to reset the working PRD for a fresh start. If yes: delete completed story files from prd-json/stories/, reset index.json stats. History always preserved in docs.local.",
  "acceptanceCriteria": [
    { "text": "Convert archive.md to progressive disclosure structure (SKILL.md + workflows/)", "checked": true },
    { "text": "Create workflows/archive-snapshot.md for creating timestamped archive", "checked": true },
    { "text": "Create workflows/cleanup-completed.md for removing completed stories", "checked": true },
    { "text": "Interactive: gum confirm 'Reset PRD for fresh start?'", "checked": true },
    { "text": "If yes: delete all story files where passes=true", "checked": true },
    { "text": "If yes: reset index.json stats (completed=0, recalculate total)", "checked": true },
    { "text": "If yes: rebuild pending array from remaining stories", "checked": true },
    { "text": "Archive progress.txt to docs.local/prd-archive/<timestamp>/", "checked": true },
    { "text": "Archive all prd-json/stories/*.json to docs.local/prd-archive/<timestamp>/", "checked": true },
    { "text": "Archive prd-json/index.json to docs.local/prd-archive/<timestamp>/", "checked": true },
    { "text": "Create new empty progress.txt after cleanup", "checked": true },
    { "text": "Add --keep flag to skip cleanup prompt", "checked": true },
    { "text": "Add --clean flag to auto-cleanup without prompt", "checked": true },
    { "text": "Update tests in test-ralph.zsh for archive functions", "checked": true },
    { "text": "Typecheck passes (zsh -n ralph.zsh)", "checked": true }
  ],
  "passes": true,
  "blockedBy": null
}
