{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["version", "global", "projects", "mcpDefinitions"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Registry schema version for future migrations"
    },
    "global": {
      "type": "object",
      "description": "Global MCPs available to all projects",
      "properties": {
        "mcps": {
          "type": "object",
          "description": "Global MCP server definitions",
          "additionalProperties": {
            "type": "object",
            "required": ["command"],
            "properties": {
              "command": {
                "type": "string",
                "description": "Command to run (e.g., 'npx', 'node')"
              },
              "args": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Arguments for the command"
              },
              "env": {
                "type": "object",
                "description": "Environment variables for this MCP",
                "additionalProperties": {
                  "type": "string"
                }
              },
              "secrets": {
                "type": "object",
                "description": "1Password references for secrets",
                "additionalProperties": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "projects": {
      "type": "object",
      "description": "Registered projects",
      "additionalProperties": {
        "type": "object",
        "required": ["path"],
        "properties": {
          "path": {
            "type": "string",
            "description": "Absolute or home-relative path to project"
          },
          "mcps": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Array of MCP names used by this project"
          },
          "secrets": {
            "type": "object",
            "description": "Project-specific secrets (1Password references)",
            "additionalProperties": {
              "type": "string"
            }
          },
          "ntfy_topic": {
            "type": "string",
            "description": "Optional ntfy.sh topic for notifications"
          },
          "created": {
            "type": "string",
            "description": "ISO 8601 timestamp when project was added"
          }
        }
      }
    },
    "mcpDefinitions": {
      "type": "object",
      "description": "Reusable MCP definitions referenced by projects",
      "additionalProperties": {
        "type": "object",
        "required": ["command"],
        "properties": {
          "command": {
            "type": "string",
            "description": "Command to run (e.g., 'npx', 'node')"
          },
          "args": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Arguments for the command"
          },
          "requiredSecrets": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Secrets required for this MCP"
          }
        }
      }
    }
  }
}
